{"version":3,"sources":["../../../js/base/ResourceLoader.js"],"names":["ResourceLoader","map","Map","key","value","image","Image","src","set","callback","count","values","onload","size"],"mappings":";;;;;;;;;qjBAAA;;;AACA;;;;IAEaA,c,WAAAA,c;AAET,8BAAa;AAAA;;AACT,aAAKC,GAAL,GAAW,IAAIC,GAAJ,sBAAX;AADS;AAAA;AAAA;;AAAA;AAET,iCAAuB,KAAKD,GAA5B,8HAAgC;AAAA;;AAAA;;AAAA,oBAAvBE,GAAuB;AAAA,oBAAnBC,KAAmB;;AAC5B,oBAAIC,QAAQ,IAAIC,KAAJ,EAAZ;AACAD,sBAAME,GAAN,GAAYH,KAAZ;AACA,qBAAKH,GAAL,CAASO,GAAT,CAAaL,GAAb,EAAiBE,KAAjB;AACH;AANQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOZ;;;;iCAEQI,Q,EAAS;AAAA;;AACd,gBAAIC,QAAQ,CAAZ;AADc;AAAA;AAAA;;AAAA;AAEd,sCAAiB,KAAKT,GAAL,CAASU,MAAT,EAAjB,mIAAmC;AAAA,wBAA3BP,KAA2B;;AAC/BA,0BAAMQ,MAAN,GAAe,YAAI;AACfF;AACA,4BAAGA,SAAO,MAAKT,GAAL,CAASY,IAAnB,EAAwB;AACpBJ,qCAAS,MAAKR,GAAd;AACH;AACJ,qBALD;AAMH;AATa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUjB;;;iCAEc;AACX,mBAAO,IAAID,cAAJ,EAAP;AACH","file":"ResourceLoader.js","sourcesContent":["//资源加载完毕之后 再开始渲染canvas\r\nimport {Resources} from \"./Resources.js\";\r\n\r\nexport class ResourceLoader{\r\n\r\n    constructor(){\r\n        this.map = new Map(Resources);\r\n        for(let [key,value] of this.map){\r\n            let image = new Image();\r\n            image.src = value;\r\n            this.map.set(key,image);\r\n        }\r\n    }\r\n\r\n    onLoaded(callback){\r\n        let count = 0;\r\n        for(let value of this.map.values()){\r\n            value.onload = ()=>{\r\n                count++;\r\n                if(count>=this.map.size){\r\n                    callback(this.map);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    static create(){\r\n        return new ResourceLoader();\r\n    }\r\n\r\n\r\n}"]}